{% extends "main_layout.html" %}
{% block title %}Meeting info{% endblock title %}

{% block body %}
    <h1>Meeting info</h1>
    <p>Meeting name: {{ meeting.name }}</p>
    <p>Meeting date: {{ meeting.date }}</p>
    <p>Meeting time: {{ meeting.time }}</p>
    <p>Meeting location: {{ meeting.location }}</p>
    <p>Meeting description: {{ meeting.description }}</p>
    {% if is_creator and meeting.participants.all.exists%}
    <form method="POST" action="{% url 'MeetApp:meeting_details' meeting.id %}">
        {% csrf_token %}
        <table>
            <thead>
                <tr>
                    <th>Participant</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                {% for user in meeting.participants.all %}
                <tr>
                    <td>{{ user }}</td>
                    <td>
                        <input type="checkbox" name="delete_users" value="{{ user.id }}">
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <li>No participants</li>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% if users_not_participating %}
            <table>
                <thead>
                    <tr>
                        <th>Not Participants</th>
                        <th>Add</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users_not_participating %}
                    <tr>
                        <td>{{ user }}</td>
                        <td>
                            <input type="checkbox" name="add_users" value="{{ user.id }}">
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% endif %}
        <button type="submit">Modify</button>
    </form>
    {% else %}
    <p>Participants:</p>
    <ul>
        {% for user in meeting.participants.all %}
        <li>{{ user }}</li>
        {% empty %}
        <li>No participants</li>
        {% endfor %}
    </ul>
    {% endif %}
    <a href="{% url 'MeetApp:index' %}">Back to meetings</a>
    <a href="{% url 'MeetApp:delete_meeting' meeting.id %}">Delete meeting</a>
    {% endblock body %}